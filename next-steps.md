# 次のステップ: PoC 機能統合

## 概要

これまでに個別に実装・テストされた PoC 機能（CLI 引数解析、プロンプト生成、LLM 呼び出し）を `main.ts` に統合し、一連の処理として実行できるようにします。
具体的には、CLI から受け取った情報をもとにプロンプトを生成し、LLM を呼び出して、その結果をコンソールに出力する流れを実装します。

## 具体的な作業内容

1. **CLI 引数解析:**
    * `main.ts` 内で `src/cli.ts` の `parseArgs` 関数を呼び出し、コマンドライン引数を解析します。
    * 解析結果（例: トピック、問題数など）を変数に格納します。
2. **プロンプト生成:**
    * `src/prompt.ts` の `generatePrompt` 関数に、1. で得られた解析結果を渡します。
    * 外部テンプレート (`templates/exam-prompt.eta`) を利用して、LLM に送信するプロンプト文字列を生成します。
3. **LLM クライアント初期化:**
    * `main.ts` で `.env` ファイルから API キー（例: `GOOGLE_API_KEY`）を読み込みます。
    * 読み込んだ API キーを使用して、`ChatGoogleGenerativeAI` クライアントのインスタンスを生成します。
4. **LLM 呼び出し:**
    * `src/llm.ts` の `callLLM` 関数を呼び出します。
    * 引数として、3. で初期化した `ChatGoogleGenerativeAI` クライアントと、2. で生成したプロンプト文字列、その他の設定（モデル名など）を渡します。
    * `callLLM` 関数内で DI されたクライアントが使用され、LLM API が呼び出されます。
5. **結果出力:**
    * `callLLM` 関数から返却された LLM の応答（生成された試験問題など）を `main.ts` で受け取ります。
    * 受け取った応答を `console.log` などでコンソールに表示します。
6. **エラーハンドリング:**
    * 各ステップ（ファイル読み込み、引数解析、プロンプト生成、API 呼び出し）で発生しうる基本的なエラー（例: ファイルが見つからない、API キーが無効、API 通信失敗など）を考慮し、`try...catch` ブロックなどを用いて適切に処理します。
    * エラー発生時には、ユーザーにわかりやすいエラーメッセージをコンソールに出力します。

## 担当モード (予定)

* Code モード
